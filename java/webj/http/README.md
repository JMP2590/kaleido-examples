# WebJ Example Application
An example application on Kaleido using the web3 Java library. This demonstrates how to connect to a Kaleido node using basic auth and perform the following:

1. Retrieve the current block height from the chain.
2. Deploy Simple Storage contract.
3. Set/Get values from the Simple Storage contract.

The node's default account is used to sign transactions that are submitted to the chain.

## Requirements

1. Java 1.8+
2. Maven

Note: The code includes a Java wrapper for the Simple Storage smart contract, generated by web3j. If you wish to generate one yourself, you will need the following additional tools:

3. solc -- to compile the simple storage smart contract
4. web3j 4.5.16+

## Steps
1. In src/main/java/kaleido/App.java:
    + Replace the `@RPC_ENDPOINT@` placeholder with the RPC endpoint for your node.
    + Replace the `@USER@` placeholder with the basic auth credentials username.
    + Replace the `@PASS@` placeholder with the basic auth credentials password.
2. Navigate to the java/webj/http/ subdirectory and run `mvn package` to install the dependencies and build the Java archive file.  This will output a JAR file - `kaleido-webj-example-0.0.1-SNAPSHOT-jar-with-dependencies.jar` - into a newly created /target directory.
3. Remain in java/webj/http/ and run `java -jar target/kaleido-webj-example-0.0.1-SNAPSHOT-jar-with-dependencies.jar` to kick off the program.

### Steps to generate the Java wrapper

1. Compile the solidity source code using `solc`
2. Generate the web3j wrapper for the smart contract. A sample command is as follows:

```
cd java/web3j/http
web3j solidity generate -a <contract-abi-file-path> -b <contract-binary-file-path> -o . -p=kaleido
```

## Walkthrough GIF

![WebJ Example Gif](../WebjExample.gif "WebJ Example GIF")
<a href="https://raw.githubusercontent.com/kaleido-io/kaleido-examples/master/java/webj/WebjExample.gif">Open GIF</a>
